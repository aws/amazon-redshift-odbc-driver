================================================================================
  ğŸ”§ Redshift ODBC v2.1.15.0 - Build on Windows
  ×”×•×¨××•×ª ×‘× ×™×™×” ×¢×œ Windows
================================================================================

âš ï¸  ×—×©×•×‘: ×”×‘× ×™×™×” ×—×™×™×‘×ª ×œ×”×™×¢×©×•×ª ×¢×œ Windows!
   IMPORTANT: Build MUST be done on Windows!

   ×œ××”?
   Why?
   â€¢ ×”×“×¨×™×™×‘×¨ ×”×•× Windows ODBC driver
     The driver is a Windows ODBC driver
   â€¢ MSI × ×•×¦×¨ ×¢× WiX Toolset (Windows ×‘×œ×‘×“)
     MSI is created with WiX Toolset (Windows only)
   â€¢ ×¦×¨×™×š Visual Studio ×¢× C++ workload
     Requires Visual Studio with C++ workload

================================================================================
ğŸ“‹ STEP 1: Prerequisites (Install These First)
×©×œ×‘ 1: ×“×¨×™×©×•×ª ××•×§×“××•×ª
================================================================================

âœ… 1. Visual Studio 2019 or later
   Download: https://visualstudio.microsoft.com/downloads/

   During installation:
   ×‘×–××Ÿ ×”×”×ª×§× ×”:
     â˜‘ Workload: "Desktop development with C++"
     â˜‘ Component: Windows 10 SDK

âœ… 2. CMake 3.15 or later
   Download: https://cmake.org/download/

   Installation:
   ×”×ª×§× ×”:
     â˜‘ Add CMake to system PATH (important!)

âœ… 3. WiX Toolset 3.11 or later
   Download: https://wixtoolset.org/releases/

   Purpose:
   ××˜×¨×”:
     Creates the MSI installer
     ×™×•×¦×¨ ××ª ×”-MSI installer


================================================================================
ğŸ“¦ STEP 2: Get the Source Code
×©×œ×‘ 2: ×§×‘×œ ××ª ×§×•×“ ×”××§×•×¨
================================================================================

Option A - Download from Linux machine:
××¤×©×¨×•×ª ×' - ×”×•×¨×“ ×××›×•× ×ª Linux:

  On Linux:
  ×‘-Linux:
    cd ~/Downloads
    # Source is already there:
    # RedshiftODBC-v2.1.15.0-FullSource.tar.gz

  Copy to Windows:
  ×”×¢×ª×§ ×œ-Windows:
    Via network share / USB / etc.

Option B - Extract on Windows:
××¤×©×¨×•×ª ×‘' - ×—×œ×¥ ×¢×œ Windows:

  1. Copy RedshiftODBC-v2.1.15.0-FullSource.tar.gz to Windows

  2. Extract using 7-Zip or:
     ×—×œ×¥ ×¢× 7-Zip ××•:

     PowerShell:
     tar -xzf RedshiftODBC-v2.1.15.0-FullSource.tar.gz

  3. Move to build location:
     ×”×¢×‘×¨ ×œ××™×§×•× ×‘× ×™×™×”:

     mkdir C:\RedshiftODBC
     move amazon-redshift-odbc-driver C:\RedshiftODBC\


================================================================================
ğŸš€ STEP 3: Quick Build (Automated)
×©×œ×‘ 3: ×‘× ×™×™×” ××”×™×¨×” (××•×˜×•××˜×™×ª)
================================================================================

ğŸ¯ Easiest way - Use the build script:
×”×“×¨×š ×”×§×œ×” ×‘×™×•×ª×¨ - ×”×©×ª××© ×‘×¡×§×¨×™×¤×˜:

  1. Open Command Prompt (not PowerShell)
     ×¤×ª×— Command Prompt (×œ× PowerShell)

  2. Navigate to source:
     × ×•×•×˜ ×œ×§×•×“ ×”××§×•×¨:

     cd C:\RedshiftODBC\amazon-redshift-odbc-driver

  3. Copy the build script:
     ×”×¢×ª×§ ××ª ×¡×§×¨×™×¤×˜ ×”×‘× ×™×™×”:

     (Copy WINDOWS-BUILD-READY.bat to this directory)
     (×”×¢×ª×§ WINDOWS-BUILD-READY.bat ×œ×ª×™×§×™×™×” ×–×•)

  4. Run the script:
     ×”×¨×¥ ××ª ×”×¡×§×¨×™×¤×˜:

     WINDOWS-BUILD-READY.bat

  5. Wait for build to complete
     ×—×›×” ×©×”×‘× ×™×™×” ×ª×¡×ª×™×™×

  6. MSI will be at:
     MSI ×™×”×™×” ×‘:

     C:\RedshiftBuilds\AmazonRedshiftODBC64-2.1.15.0.msi

Done! ×–×”×•!


================================================================================
ğŸ”§ STEP 3 (Alternative): Manual Build
×©×œ×‘ 3 (×—×œ×•×¤×”): ×‘× ×™×™×” ×™×“× ×™×ª
================================================================================

If automated script doesn't work:
×× ×”×¡×§×¨×™×¤×˜ ×”××•×˜×•××˜×™ ×œ× ×¢×•×‘×“:

  1. Open "Developer Command Prompt for VS 2019"
     ×¤×ª×— "Developer Command Prompt for VS 2019"
     (NOT regular Command Prompt!)
     (×œ× Command Prompt ×¨×’×™×œ!)

  2. Navigate to source:
     × ×•×•×˜ ×œ×§×•×“:

     cd C:\RedshiftODBC\amazon-redshift-odbc-driver

  3. Run build script:
     ×”×¨×¥ ×¡×§×¨×™×¤×˜ ×‘× ×™×™×”:

     build64.bat

  4. Wait (10-20 minutes)
     ×—×›×” (10-20 ×“×§×•×ª)

  5. Check for MSI:
     ×‘×“×•×§ MSI:

     dir cmake-build\install\src\odbc\rsodbc\install\*.msi


================================================================================
âœ… STEP 4: Verify Build Success
×©×œ×‘ 4: ×•×“× ×”×¦×œ×—×ª ×”×‘× ×™×™×”
================================================================================

Check for these files:
×‘×“×•×§ ××ª ×”×§×‘×¦×™× ×”××œ×”:

  âœ“ cmake-build\install\src\odbc\rsodbc\install\AmazonRedshiftODBC64-2.1.15.0.msi
    Expected size: ~7-8 MB
    ×’×•×“×œ ×¦×¤×•×™: ~7-8 ××’×”

  âœ“ cmake-build\install\bin\rsodbc.dll
    The actual driver DLL
    ×§×•×‘×¥ ×”-DLL ×©×œ ×”×“×¨×™×™×‘×¨

Get version info:
×§×‘×œ ××™×“×¢ ×’×¨×¡×”:

  PowerShell:
  (Get-Item "cmake-build\install\src\odbc\rsodbc\install\AmazonRedshiftODBC64-2.1.15.0.msi").VersionInfo

Calculate checksum:
×—×©×‘ checksum:

  certutil -hashfile "cmake-build\install\src\odbc\rsodbc\install\AmazonRedshiftODBC64-2.1.15.0.msi" SHA256


================================================================================
ğŸ§ª STEP 5: Test the Driver
×©×œ×‘ 5: ×‘×“×•×§ ××ª ×”×“×¨×™×™×‘×¨
================================================================================

1. Install MSI:
   ×”×ª×§×Ÿ MSI:

   Right-click â†’ Install
   ××•:
   or:
   msiexec /i AmazonRedshiftODBC64-2.1.15.0.msi

2. Configure ODBC DSN:
   ×”×’×“×¨ ODBC DSN:

   â€¢ Open: "ODBC Data Source Administrator (64-bit)"
     ×¤×ª×—: "ODBC Data Source Administrator (64-bit)"
   â€¢ Add â†’ Amazon Redshift (x64)
   â€¢ plugin_name: BrowserAzureADOAuth2
   â€¢ idp_tenant: your-tenant
   â€¢ client_id: your-client-id

3. Test authentication cancellation:
   ×‘×“×•×§ ×‘×™×˜×•×œ authentication:

   âœ“ Click "Test" button
   âœ“ Browser opens to Azure AD
   âœ“ Click "Cancel" button
   âœ… Should show error immediately:
      "Authentication failed. The authorization code was not received..."

4. Test browser close:
   ×‘×“×•×§ ×¡×’×™×¨×ª ×“×¤×“×¤×Ÿ:

   âœ“ Click "Test" button
   âœ“ Browser opens
   âœ“ Close browser window (X)
   âœ… Should show same error immediately

5. Test successful login:
   ×‘×“×•×§ ×›× ×™×¡×” ××•×¦×œ×—×ª:

   âœ“ Click "Test"
   âœ“ Complete Azure AD login
   âœ… Should show: "Connection Successful"


================================================================================
ğŸ“¤ STEP 6: Distribute
×©×œ×‘ 6: ×”×¤×¥
================================================================================

Copy MSI back to Linux:
×”×¢×ª×§ MSI ×—×–×¨×” ×œ-Linux:

  From Windows:
  ×-Windows:
    Copy: C:\RedshiftBuilds\AmazonRedshiftODBC64-2.1.15.0.msi
    To network share / USB
    ×œ××™×§×•× ××©×•×ª×£ / USB

  On Linux:
  ×‘-Linux:
    cp /mnt/windows/AmazonRedshiftODBC64-2.1.15.0.msi ~/Downloads/

Generate final checksum:
×¦×•×¨ checksum ×¡×•×¤×™:

  sha256sum AmazonRedshiftODBC64-2.1.15.0.msi > AmazonRedshiftODBC64-2.1.15.0.msi.sha256


================================================================================
ğŸ› TROUBLESHOOTING
×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª
================================================================================

âŒ Error: "cmake not found"
   Solution:
   ×¤×ª×¨×•×Ÿ:
     â€¢ Reinstall CMake
     â€¢ Check "Add to PATH" during installation
     â€¢ Or add manually: C:\Program Files\CMake\bin

âŒ Error: "MSBuild not found"
   Solution:
   ×¤×ª×¨×•×Ÿ:
     â€¢ Use "Developer Command Prompt for VS" (not regular CMD!)
     â€¢ Reinstall Visual Studio C++ workload

âŒ Error: "WiX toolset not found"
   Solution:
   ×¤×ª×¨×•×Ÿ:
     â€¢ Install from: https://wixtoolset.org/releases/
     â€¢ Restart command prompt after installation

âŒ Error: Build fails with C++ errors
   Solution:
   ×¤×ª×¨×•×Ÿ:
     â€¢ Clean build: rmdir /S /Q cmake-build
     â€¢ Rebuild: build64.bat

âŒ MSI not created but build succeeded
   Solution:
   ×¤×ª×¨×•×Ÿ:
     â€¢ Install WiX Toolset
     â€¢ Rebuild
     â€¢ Driver DLL is at: cmake-build\install\bin\rsodbc.dll


================================================================================
ğŸ“Š Expected Build Output
×¤×œ×˜ ×¦×¤×•×™ ××”×‘× ×™×™×”
================================================================================

Successful build output:
×¤×œ×˜ ×”×¦×œ×—×”:

  Building 64 bit Windows x64 Redshift ODBC Driver
  cmake version 3.xx.x
  ...
  [100%] Built target rsodbc
  ...
  Creating MSI installer...
  ...
  Build succeeded.
      0 Warning(s)
      0 Error(s)

  Time Elapsed 00:15:32.45

Files created:
×§×‘×¦×™× ×©× ×•×¦×¨×•:

  cmake-build/
  â”œâ”€â”€ install/
  â”‚   â”œâ”€â”€ bin/
  â”‚   â”‚   â””â”€â”€ rsodbc.dll                        â† Driver DLL
  â”‚   â””â”€â”€ src/
  â”‚       â””â”€â”€ odbc/
  â”‚           â””â”€â”€ rsodbc/
  â”‚               â””â”€â”€ install/
  â”‚                   â””â”€â”€ AmazonRedshiftODBC64-2.1.15.0.msi  â† MSI Installer


================================================================================
â±ï¸  Expected Build Time
×–××Ÿ ×‘× ×™×™×” ×¦×¤×•×™
================================================================================

â€¢ First build: 15-25 minutes
  ×‘× ×™×™×” ×¨××©×•× ×”: 15-25 ×“×§×•×ª

â€¢ Rebuild: 5-10 minutes
  ×‘× ×™×™×” ××—×“×©: 5-10 ×“×§×•×ª

Depends on:
×ª×œ×•×™ ×‘:
  â€¢ CPU speed
  â€¢ Disk speed (SSD recommended)
  â€¢ RAM (8GB+ recommended)


================================================================================
ğŸ’¡ TIPS
×˜×™×¤×™×
================================================================================

âœ… Use SSD for faster builds
   ×”×©×ª××© ×‘-SSD ×œ×‘× ×™×™×” ××”×™×¨×” ×™×•×ª×¨

âœ… Close unnecessary programs during build
   ×¡×’×•×¨ ×ª×•×›× ×™×•×ª ××™×•×ª×¨×•×ª ×‘×–××Ÿ ×‘× ×™×™×”

âœ… Build in Release mode (not Debug)
   ×‘× ×” ×‘××¦×‘ Release (×œ× Debug)

âœ… Keep build log for troubleshooting
   ×©××•×¨ log ×©×œ ×”×‘× ×™×™×” ×œ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª

âœ… Test on clean Windows VM first
   ×‘×“×•×§ ×¢×œ VM × ×§×™ ×©×œ Windows ×§×•×“×


================================================================================
ğŸ“ SUPPORT
×ª××™×›×”
================================================================================

Build Issues:
×‘×¢×™×•×ª ×‘× ×™×™×”:
  â€¢ Check all prerequisites installed
    ×•×“× ×©×›×œ ×”×“×¨×™×©×•×ª ××•×ª×§× ×•×ª
  â€¢ Use Developer Command Prompt (not regular CMD)
    ×”×©×ª××© ×‘-Developer Command Prompt (×œ× CMD ×¨×’×™×œ)
  â€¢ Check build.log for errors
    ×‘×“×•×§ build.log ×œ×©×’×™××•×ª

Runtime Issues:
×‘×¢×™×•×ª ×”×¨×¦×”:
  â€¢ Enable debug logging in ODBC configuration
    ×”×¤×¢×œ debug logging ×‘×”×’×“×¨×•×ª ODBC
  â€¢ Check ODBC logs
    ×‘×“×•×§ ×œ×•×’×™× ×©×œ ODBC


================================================================================

Version: 2.1.15.0
Date: 2026-02-09
Platform: Windows 64-bit
Build Tool: Visual Studio 2019+

ğŸ¤– Generated with Claude Code (https://claude.com/claude-code)

================================================================================
